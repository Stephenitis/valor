<!DOCTYPE HTML>
<html><head><meta charset="UTF-8"><title>Subspace</title><style type="text/css">html,head,body { padding:0; margin:0; }body { font-family: helvetica, arial, sans-serif; }</style></head><body><script type="text/javascript" src="elm-runtime-0.7.1.1.js"></script><script type="text/javascript">
try{

if (Elm.Starfield) throw new Error("Module name collision, 'Starfield' is already defined."); 
Elm.Starfield=function(){
 var $op={};
 for(Elm['i'] in Elm){eval('var '+Elm['i']+'=Elm[Elm.i];');}
 try{
  if (!(Elm.Prelude instanceof Object)) throw new Error('module not found');
 } catch(e) {
  throw new Error("Module 'Prelude' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Prelude) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Prelude[Elm.i];');}
 function randstar_2(__10){
  return JavaScript.randInRange(0)(starTilesize_0);}
 function starLayers_8(_0_12){
  return function(){
  switch(_0_12[0]){
   case 'Tuple4':
   return function(){
    var left_17=floor(((_0_12[1]-_0_12[3])/toFloat(starTilesize_0)));
    var top_18=floor(((_0_12[2]-_0_12[4])/toFloat(starTilesize_0)));
    var right_19=floor(((_0_12[1]+_0_12[3])/toFloat(starTilesize_0)));
    var bottom_20=floor(((_0_12[2]+_0_12[4])/toFloat(starTilesize_0)));
    var ltr_21=function(){
     var lo=left_17;
     var hi=right_19;
     var lst=["Nil"];if(lo<=hi){do{lst=['Cons',hi,lst]}while(hi-->lo)}
     return lst;}();
    var ttb_22=function(){
     var lo=top_18;
     var hi=bottom_20;
     var lst=["Nil"];if(lo<=hi){do{lst=['Cons',hi,lst]}while(hi-->lo)}
     return lst;}();
    function st_23(_0_24){
     return function(){
     switch(_0_24[0]){
      case 'Tuple2':
      return starTile_9(['Tuple2',_0_24[1],_0_24[2]])(['Tuple4',_0_12[1],_0_12[2],_0_12[3],_0_12[4]]);
     }
     throw new Error("Non-exhaustive pattern match in case expression (Line 18, Column 18)");}();}
    return ['Tuple7',left_17,top_18,right_19,bottom_20,ltr_21,ttb_22,foldl(function(r_27){
     return function(a_28){
      return foldl(function(c_29){
       return function(a2_30){
        return Value.append(a2_30,st_23(['Tuple2',c_29,r_27]));};})(a_28)(ltr_21);};})(['Nil'])(ttb_22)];}();
  }
  throw new Error("Non-exhaustive pattern match in case expression (Line 12, Column 3)");}();}
 function starTile_9(_1_31){
  return function(_0_32){
   return function(){
   switch(_1_31[0]){
    case 'Tuple2':
    return function(){
    switch(_0_32[0]){
     case 'Tuple4':
     return function(){
      function dx1_39(x_44){
       return (((((_1_31[1]*starTilesize_0)+x_44)-_0_32[1])+_0_32[3])/2);}
      function dy1_40(y_45){
       return (((((_1_31[2]*starTilesize_0)+y_45)-_0_32[2])+_0_32[4])/2);}
      function dx2_41(x_46){
       return (((((_1_31[1]*starTilesize_0)+x_46)-_0_32[1])/3)+(_0_32[3]/2));}
      function dy2_42(y_47){
       return (((((_1_31[2]*starTilesize_0)+y_47)-_0_32[2])/3)+(_0_32[4]/2));}
      function star_43(color_48){
       return function(_0_49){
        return function(){
        switch(_0_49[0]){
         case 'Tuple2':
         return filled(color_48)(rect(1)(1)(['Tuple2',_0_49[1],_0_49[2]]));
        }
        throw new Error("Non-exhaustive pattern match in case expression (Line 31, Column 27)");}();};}
      return Value.append(map(function(_0_52){
       return function(){
       switch(_0_52[0]){
        case 'Tuple2':
        return star_43(l1color_6)(['Tuple2',dx1_39(_0_52[1]),dy1_40(_0_52[2])]);
       }
       throw new Error("Non-exhaustive pattern match in case expression (Line 32, Column 21)");}();})(starsLevel1_4),map(function(_0_55){
       return function(){
       switch(_0_55[0]){
        case 'Tuple2':
        return star_43(l2color_7)(['Tuple2',dx2_41(_0_55[1]),dy2_42(_0_55[2])]);
       }
       throw new Error("Non-exhaustive pattern match in case expression (Line 33, Column 21)");}();})(starsLevel2_5));}();
    }
    throw new Error("Non-exhaustive pattern match in case expression (Line 27, Column 3)");}();
   }
   throw new Error("Non-exhaustive pattern match in case expression (Line 27, Column 3)");}();};}
 var starTilesize_0=1024;
 var starDensity_1=31;
 var starPoints_3=map(function(x_11){
  return ['Tuple2',randstar_2(x_11),randstar_2(x_11)];})(function(){
  var lo=0;
  var hi=starDensity_1;
  var lst=["Nil"];if(lo<=hi){do{lst=['Cons',hi,lst]}while(hi-->lo)}
  return lst;}());
 var starsLevel1_4=starPoints_3;
 var starsLevel2_5=starPoints_3;
 var l1color_6=rgb(184)(184)(184);
 var l2color_7=rgb(96)(96)(96);
 return {$op : {},
 starTilesize:starTilesize_0,
 starDensity:starDensity_1,
 randstar:randstar_2,
 starPoints:starPoints_3,
 starsLevel1:starsLevel1_4,
 starsLevel2:starsLevel2_5,
 l1color:l1color_6,
 l2color:l2color_7,
 starLayers:starLayers_8,
 starTile:starTile_9};}();
Elm.main=function(){
 return Elm.Starfield.main;};
} catch (e) {
Elm.main=function() {
var msg = ('<br/><h2>Your browser may not be supported. Are you using a modern browser?</h2>' + '<br/><span style="color:grey">Runtime Error in Starfield module:<br/>' + e + '</span>');
document.body.innerHTML = Elm.Text.monospace(msg);throw e;};}
try{

if (Elm.Subspace) throw new Error("Module name collision, 'Subspace' is already defined."); 
Elm.Subspace=function(){
 var $op={};
 for(Elm['i'] in Elm){eval('var '+Elm['i']+'=Elm[Elm.i];');}
 try{
  if (!(Elm.Prelude instanceof Object)) throw new Error('module not found');
 } catch(e) {
  throw new Error("Module 'Prelude' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Prelude) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Prelude[Elm.i];');}
 try{
  if (!(Elm.Starfield instanceof Object)) throw new Error('module not found');
 } catch(e) {
  throw new Error("Module 'Starfield' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Starfield) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Starfield[Elm.i];');}
 function UserInput_5(a1){
  return ['UserInput',a1];}
 function Input_7(a1){
  return function(a2){
   return ['Input',a1,a2];};}
 function GameState_8(a1){
  return ['GameState',a1];}
 function clamp_0(min_22){
  return function(max_23){
   return function(x_24){
    return ((compare(x_24)(min_22)[0] === 'LT') ? min_22 : ((compare(x_24)(max_23)[0] === 'LT') ? x_24 : (otherwise ? max_23 : (function(){throw new Error("Non-exhaustive multi-way-if expression (Line 6, Column 3)");}()))));};};}
 function stepGame_10(_1_25){
  return function(_0_26){
   return function(){
   switch(_1_25[0]){
    case 'Input':
    switch(_1_25[2][0]){
     case 'UserInput':
     return function(){
     switch(_0_26[0]){
      case 'GameState':
      return function(){
       var _0_30=_0_26[1];
       var x_31=function(r){
        return r.hasOwnProperty('_') ? r.x[0] : r.x;}(_0_30);
       var y_32=function(r){
        return r.hasOwnProperty('_') ? r.y[0] : r.y;}(_0_30);
       var angle_33=function(r){
        return r.hasOwnProperty('_') ? r.angle[0] : r.angle;}(_0_30);
       var dx_34=function(r){
        return r.hasOwnProperty('_') ? r.dx[0] : r.dx;}(_0_30);
       var dy_35=function(r){
        return r.hasOwnProperty('_') ? r.dy[0] : r.dy;}(_0_30);
       return GameState_8(function(){
        var r={_:[true]};
        var e=_0_26[1];
        for(var i in e){r[i]=e[i];}
        r.dx=r.dx.slice(0);
        r.dx[0]=clamp_0((0-100))(100)((dx_34+((toFloat(function(r){
         return r.hasOwnProperty('_') ? r.y[0] : r.y;}(_1_25[2][1]))*2)*sin(angle_33))));
        r.dy=r.dy.slice(0);
        r.dy[0]=clamp_0((0-100))(100)((dy_35+(((toFloat(function(r){
         return r.hasOwnProperty('_') ? r.y[0] : r.y;}(_1_25[2][1]))*2)*cos(angle_33))*(0-1))));
        r.angle=r.angle.slice(0);
        r.angle[0]=(angle_33+((_1_25[1]*3)*toFloat(function(r){
         return r.hasOwnProperty('_') ? r.x[0] : r.x;}(_1_25[2][1]))));
        r.x=r.x.slice(0);
        r.x[0]=clamp_0((shipW_3/2))((mapW_1-(shipW_3/2)))((x_31+(_1_25[1]*dx_34)));
        r.y=r.y.slice(0);
        r.y[0]=clamp_0((shipH_4/2))((mapH_2-(shipH_4/2)))((y_32+(_1_25[1]*dy_35)));
        r.t=r.t.slice(0);
        r.t[0]=_1_25[1];
        return r;}());}();
     }
     throw new Error("Non-exhaustive pattern match in case expression (Line 31, Column 3)");}();
    }break;
   }
   throw new Error("Non-exhaustive pattern match in case expression (Line 31, Column 3)");}();};}
 function background_11(w_36){
  return function(h_37){
   return filled(black)(rect(w_36)(h_37)(['Tuple2',(w_36/2),(h_37/2)]));};}
 function ship_12(vw_38){
  return function(vh_39){
   return function(angle_40){
    return rotate((angle_40/(2*pi)))(sprite(Value.str('ship2.png'))(shipW_3)(shipH_4)(['Tuple2',((vw_38/2)-(shipW_3/2)),((vh_39/2)-(shipH_4/2))]));};};}
 function viewPort_13(w_41){
  return function(h_42){
   return function(x_43){
    return function(y_44){
     return function(){
      var vx_45=(x_43-(toFloat(w_41)/2));
      var vy_46=(y_44-(toFloat(h_42)/2));
      return ['Tuple4',vx_45,vy_46,w_41,h_42];}();};};};}
 function whiteTextForm_14(string_47){
  return function(x){
   return text(Text.color(white)(x));}(toText(string_47));}
 function debug_15(key_48){
  return function(value_49){
   return whiteTextForm_14(Value.append(key_48,Value.append(Value.str(': '),show(value_49))));};}
 function display_16(_1_50){
  return function(_0_51){
   return function(){
   switch(_1_50[0]){
    case 'Tuple2':
    return function(){
    switch(_0_51[0]){
     case 'GameState':
     return function(){
      var vp_55=viewPort_13(_1_50[1])(_1_50[2])(function(r){
       return r.hasOwnProperty('_') ? r.x[0] : r.x;}(_0_51[1]))(function(r){
       return r.hasOwnProperty('_') ? r.y[0] : r.y;}(_0_51[1]));
      var _0_56=Starfield.starLayers(vp_55);
      var left_57=function(){
      switch(_0_56[0]){
       case 'Tuple7':
       return _0_56[1];
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 100, Column 44)");}();
      var top_58=function(){
      switch(_0_56[0]){
       case 'Tuple7':
       return _0_56[2];
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 100, Column 44)");}();
      var right_59=function(){
      switch(_0_56[0]){
       case 'Tuple7':
       return _0_56[3];
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 100, Column 44)");}();
      var bottom_60=function(){
      switch(_0_56[0]){
       case 'Tuple7':
       return _0_56[4];
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 100, Column 44)");}();
      var ltr_61=function(){
      switch(_0_56[0]){
       case 'Tuple7':
       return _0_56[5];
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 100, Column 44)");}();
      var ttb_62=function(){
      switch(_0_56[0]){
       case 'Tuple7':
       return _0_56[6];
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 100, Column 44)");}();
      var sl_63=function(){
      switch(_0_56[0]){
       case 'Tuple7':
       return _0_56[7];
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 100, Column 44)");}();
      var w_64=floor(_1_50[1]);
      var h_65=floor(_1_50[2]);
      var displayLayers_66=['Cons',background_11(w_64)(h_65),Value.append(sl_63,['Cons',ship_12(w_64)(h_65)(function(r){
       return r.hasOwnProperty('_') ? r.angle[0] : r.angle;}(_0_51[1])),['Nil']])];
      return container(w_64)(h_65)(topLeft)(layers(['Cons',collage(w_64)(h_65)(displayLayers_66),['Cons',flow(down)(['Cons',debug_15(Value.str('Viewport'))(vp_55),['Cons',debug_15(Value.str('Stars'))(['Tuple6',left_57,top_58,right_59,bottom_60,ltr_61,ttb_62]),['Cons',debug_15(Value.str('gameState'))(_0_51[1]),['Nil']]]]),['Nil']]]));}();
    }
    throw new Error("Non-exhaustive pattern match in case expression (Line 99, Column 3)");}();
   }
   throw new Error("Non-exhaustive pattern match in case expression (Line 99, Column 3)");}();};}
 var mapW_1=6400;
 var mapH_2=4800;
 var shipW_3=(170/4);
 var shipH_4=(166/4);
 var userInput_6=lift(UserInput_5)(Keyboard.arrows);
 var defaultGame_9=GameState_8({
   angle : [0.0],
   dx : [0.0],
   dy : [0.0],
   t : [0.0],
   x : [100.0],
   y : [100.0],
   _ : [true]});
 var delta_17=lift(inSeconds)(fps(30));
 var avgFPS_18=average(10)(delta_17);
 var input_19=sampleOn(delta_17)(lift2(Input_7)(delta_17)(userInput_6));
 var gameState_20=foldp(stepGame_10)(defaultGame_9)(input_19);
 var main_21=lift2(display_16)(Window.dimensions)(gameState_20);
 return {$op : {},
 clamp:clamp_0,
 mapW:mapW_1,
 mapH:mapH_2,
 shipW:shipW_3,
 shipH:shipH_4,
 UserInput:UserInput_5,
 userInput:userInput_6,
 Input:Input_7,
 GameState:GameState_8,
 defaultGame:defaultGame_9,
 stepGame:stepGame_10,
 background:background_11,
 ship:ship_12,
 viewPort:viewPort_13,
 whiteTextForm:whiteTextForm_14,
 debug:debug_15,
 display:display_16,
 delta:delta_17,
 avgFPS:avgFPS_18,
 input:input_19,
 gameState:gameState_20,
 main:main_21};}();
Elm.main=function(){
 return Elm.Subspace.main;};
} catch (e) {
Elm.main=function() {
var msg = ('<br/><h2>Your browser may not be supported. Are you using a modern browser?</h2>' + '<br/><span style="color:grey">Runtime Error in Subspace module:<br/>' + e + '<br/><br/>The problem may stem from an improper usage of:<br/>Starfield.starLayers, Text.color, fps, inSeconds, otherwise</span>');
document.body.innerHTML = Elm.Text.monospace(msg);throw e;};}</script><div id="widthChecker" style="width:100%; height:1px; position:absolute; top:-1px;"></div><div id="content"></div><script type="text/javascript">Dispatcher.initialize()</script><noscript><p>ship2.png</p><p>: </p><p>Viewport</p><p>Stars</p><p>gameState</p></noscript></body></html>